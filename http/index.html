<!doctype html>
<html lang="en" dir="ltr" class="mdx-wrapper mdx-page plugin-pages plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">彻底掌握基于HTTP网络层的&quot;前端性能优化&quot; | 不会cv ⭐</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://zhangguoxinbuhuicv.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://zhangguoxinbuhuicv.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://zhangguoxinbuhuicv.github.io/http"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="彻底掌握基于HTTP网络层的&quot;前端性能优化&quot; | 不会cv ⭐"><meta data-rh="true" name="description" content="从输入URL地址到看到页面，中间经历了什么？"><meta data-rh="true" property="og:description" content="从输入URL地址到看到页面，中间经历了什么？"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://zhangguoxinbuhuicv.github.io/http"><link data-rh="true" rel="alternate" href="https://zhangguoxinbuhuicv.github.io/http" hreflang="en"><link data-rh="true" rel="alternate" href="https://zhangguoxinbuhuicv.github.io/http" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="不会cv ⭐ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="不会cv ⭐ Atom Feed"><link rel="stylesheet" href="/assets/css/styles.5c8c3f00.css">
<link rel="preload" href="/assets/js/runtime~main.b9c77f65.js" as="script">
<link rel="preload" href="/assets/js/main.d006512a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.jpg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.jpg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">直到世界的尽头</b></a><a class="navbar__item navbar__link" href="/docs/intro">笔记</a><a class="navbar__item navbar__link" href="/blog">博客</a><a class="navbar__item navbar__link" href="/jianli">简历</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/zhangguoxinbuhuiCV" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><main class="container container--fluid margin-vert--lg"><div class="row mdxPageWrapper_j9I6"><div class="col col--8"><article><h1>彻底掌握基于HTTP网络层的&quot;前端性能优化&quot;</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="从输入url地址到看到页面中间经历了什么">从输入URL地址到看到页面，中间经历了什么？<a href="#从输入url地址到看到页面中间经历了什么" class="hash-link" aria-label="Direct link to 从输入URL地址到看到页面，中间经历了什么？" title="Direct link to 从输入URL地址到看到页面，中间经历了什么？">​</a></h2><p><img loading="lazy" alt="&amp;#39;从输入URL地址到看到页面，中间经历了什么？&amp;#39;" src="/assets/images/http-7a28349a3796b1e359e268a2f020bb8e.jpg" width="1728" height="823" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-url解析">1. URL解析<a href="#1-url解析" class="hash-link" aria-label="Direct link to 1. URL解析" title="Direct link to 1. URL解析">​</a></h3><p>地址解析
<img loading="lazy" alt="&amp;#39;地址解析&amp;#39;" src="/assets/images/http1-a003ba13af67bafbc6ad988efcf18f6c.jpg" width="1728" height="481" class="img_ev3q"><br>
<!-- -->TCP/IP</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- TCP 建立客户端和服务端的传输通道 -&gt; 路</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- HTTP 传输协议 -&gt; 快递小哥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- HTTPS, SSL/TLS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- FTP 传输一些大文件</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>默认端口号</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- HTTP 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- HTTps 443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- FTP 21</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>URL编码</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- encodeURL / decodeURL 对整个URL的编码：处理空格/中文...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- encodeURICopoment / decodeURIComponent 主要对传递的参数进行编码</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-缓存检查">2. 缓存检查<a href="#2-缓存检查" class="hash-link" aria-label="Direct link to 2. 缓存检查" title="Direct link to 2. 缓存检查">​</a></h3><p>缓存位置（后端nginx配置）</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- Memory Cache:内存缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Disk Cache：硬盘缓存</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>缓存检测：产品性能优化的重点</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- 强缓存 协商缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - 先检测是否有强缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - 有，且未失效，走强缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - 如果没有，或者失效  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        检测是否有协商缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - 有 走协商缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - 没有 获取最新的数据</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>打开网页：查找 disk cache中是否有匹配，如果有则使用，没有则发送网络请求</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- 普通刷新(F5):因TAB没关闭，因此发送的请求头均带有memory cache是可用的，会被优先使用，其次才是disk cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 强制刷新(Ctrl + F5):关闭浏览器不使用缓存，因此发送的请求头都带有 Cache-control：no-cache,服务器直接返回 200 和最新内容</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>强缓存: Expires / Cache-Control<br>
<!-- -->浏览器对强缓存的处理：根据的一次请求资源时返回的响应头来确定的</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- Expired：缓存过期时间，用来指定资源到期的时间 (HTTP/1.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Cache-Control:cache-control:max-age=2592000第一次拿到资源后的2592000秒内(30天)。再次发送请求，读取缓存中的信息 (HTTP/1.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 两者同时存在的话，Cache-Control优先级高于Expires</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>HTML页面一般不做强缓存(强缓存有问题，可以直接不用，用写协商缓存)<br>
<!-- -->每一次html的请求都是正常的HTTP请求  </p><ol><li>服务器更新资源后，让资源名和之前不一样，这样页面页面导入全新的资源</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">index.dads1321.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index.dasd1231.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>webpack hash name 实现
2. 当文件更新后，我们在html导入的时候，设置一个后缀（时间戳）  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script scr=&#x27;index.js?56445465&#x27;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script scr=&#x27;index.js?56564536&#x27;&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>协商缓存(304): Last-Modified(http 1.0) / ETag(http 1.1)
协商缓存就是强制缓存失效后，浏览器携带缓存标识向服务器发送前求，有服务器根据缓存标识决定是否使用缓存的过程
<img loading="lazy" alt="协商缓存" src="/assets/images/http2-18309784bf6acbe4b58e0a340dfb1325.png" width="1728" height="1080" class="img_ev3q"></p><p>协商缓存和强缓存的区别：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- 协商缓存总会和服务器协商，所以一定要发HTTP请求的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>第一次向服务器发送请求 ：
协商缓存没有<br>
<!-- -->向服务器发送请求（没有传递任何的标识）</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- 服务器收到请求准备内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Last-Modified:资源文件最后更新的时间</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ETag:记录的是一个个标识（也是根据资源文件更新生成的，每一次资源更新都会重新生成一个Etag）</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>客户端拿到信息后渲染
把信息和标识缓存到本地<br>
<!-- -->第二次发送请求</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- if-Modified-Since = Last-Modified的值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- if-Node_Match = ETag 值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 给服务器根据标识判断文件是否更新</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-dns解析域名解析">3. DNS解析（域名解析）<a href="#3-dns解析域名解析" class="hash-link" aria-label="Direct link to 3. DNS解析（域名解析）" title="Direct link to 3. DNS解析（域名解析）">​</a></h3><p>递归查询<br>
<!-- -->迭代查询<br>
<!-- -->第一次DNS解析使劲啊预计在20~120毫秒</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- 减少DNS请求次数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- DNS预获取（DNS Prefetch）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//misc.360buyimg.com&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//img10.360buyimg.com&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//img11.360buyimg.com&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//img12.360buyimg.com&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//img13.360buyimg.com&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//img14.360buyimg.com&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>服务器拆分</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- 资源的合理利用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 抗压能力强</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 提高HTTP并发</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-tcp三次握手">4. TCP三次握手<a href="#4-tcp三次握手" class="hash-link" aria-label="Direct link to 4. TCP三次握手" title="Direct link to 4. TCP三次握手">​</a></h3><p>seq序号，用来标识从TCP源端向目的端发送的字节流，发送方发送数据时对此进行标记<br>
<!-- -->ack确认序号，只有ACK标识位为1时，确认序号字段才有效，ack=seq+1
标识位</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- ACK：确认序号有效</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- RST：重置连接</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- SYN：发起一个连接</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- FIN：释放一个连接   </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="TCP三次握手" src="/assets/images/tcp-45db1a1c28c8d61764b76b5ebad81249.webp" width="720" height="310" class="img_ev3q"><br>
<!-- -->TCP作为一种可靠传输协议，其核心思想：既要保证数据可靠传输，又要提高传输的效率</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-数据传输">5. 数据传输<a href="#5-数据传输" class="hash-link" aria-label="Direct link to 5. 数据传输" title="Direct link to 5. 数据传输">​</a></h3><p>HTTP报文</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- 请求报文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 响应报文</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>响应状态码</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- 1XX   响应中--临时状态码，表示请求已经接受，告诉客户端应该继续请求或者如果它已经完成则忽略它</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 2XX   成功--表示请求已经被成功接受，处理已完成</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 3XX   重定向--重定向到其他地方（让客户端再发起一个请求以完成整个处理）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 4XX   客户端错误--处理发生错误，责任在客户端，如：客户端的请求一个不存在的资源，客户端未被授权，禁止访问等</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 5XX   服务器端错误--处理发生错误，责任在服务器端，如：服务端抛出异常，路由出错，HTTP版本不支持等</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">常见状态码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">200 OK  客户端请求成功，即处理成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">302 Found   只是所请求的资源已移动到由Location响应头给定的URL，浏览器会自动重新访问到这个页面</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">304 Not Modified    告诉客户端，你请求的资源至上次取得后，服务端并未更改，你直接用你本地缓存吧。隐式重定向</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">400 Bad Request 客户端请求有语法错误，不能被服务器所理解</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">403 Forbidden   服务器收到请求，但是拒绝提供服务，比如：没有权限访问相关资源</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">404 Not Found   请求资源不存在，一般是URL输入有误，或者网站资源被删除了</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">428 Precondition Required   服务器要求有条件的请求，告诉客户端要想访问资源，必须携带特定的请求头</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">429 Too Many Requests   太多请求，可以限制客户端请求某个资源的数量，配合Retry-After（多长时间后可以请求）响应头一起使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">431 Request Header Fields Too Large 请求头太大，服务器不愿意处理请求，因为它的头部字段太大。请求可以在减少请求头域的大小后提交</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">405 Method Not Allowed  请求方式有误，比如：应该用GET请求方式的资源，而用了POST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">500 Internal Server Error   服务器发生不可预期的错误，表示服务器出异常了</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">503 Service Unavailable 服务器尚未准备好处理请求，比如：服务器刚刚启动，还未初始化好</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">511 Network Authentication Required</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6tcp的四次挥手">6.TCP的四次挥手<a href="#6tcp的四次挥手" class="hash-link" aria-label="Direct link to 6.TCP的四次挥手" title="Direct link to 6.TCP的四次挥手">​</a></h3><p>为什么连接的时候时三次握手，关闭的时候是四次挥手？（面试题）  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- 服务器端收到客户端的SYN连接请求报文后，可以直接发送SYN+ACK报文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 但关闭的时候，当服务器端收到FIN报文时，很可能并不会立即关闭连接，所以只能先回复一个ACK报文，告诉客户端：&quot;你的FIN报文我收到了&quot;，只要等到服务器端所有的报文都发送完成，我才能发送FIN报文，因此不能一起发送，故需要四次握手</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Connetion：keep-alive</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-页面渲染">7. 页面渲染<a href="#7-页面渲染" class="hash-link" aria-label="Direct link to 7. 页面渲染" title="Direct link to 7. 页面渲染">​</a></h3><p>主要是介绍浏览器从显示网页整体做了那些具体流程，主要分析渲染部分
<img loading="lazy" alt="主要流程" src="/assets/images/http3-a7c3ece69933187f8402afb7948db8d1.webp" width="720" height="178" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-解析html">1. 解析HTML<a href="#1-解析html" class="hash-link" aria-label="Direct link to 1. 解析HTML" title="Direct link to 1. 解析HTML">​</a></h4><p>解析我们的HTML，生成DOM树结构 首先会拿到html的整体的字符串，进行标记化（token）</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- 为什么要标记化，因为浏览器是不能识别这些字符串需要进行标记化的处理，本质上就是把这段字符串的html进行标签类型的拆分，因为是一长串的字符串需要对字符串进行解析成node节点，所以会进行标记化，方便浏览器根据标记的标签去进行DOM树渲染</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="/assets/images/http4-648145d801daa785105634a28a21b3a6.webp" width="698" height="888" class="img_ev3q">  </p><p>但是我们在解析HTML的过程当中我们也会碰到style和link这样的标签，这些样式和交互的内容就涉及到CSS的解析 浏览器在解析的时候为了提高效率会启动一个预解析线程，这个线程主要做的就是扫描出外部的style和js文件进行异步下载解析，解析完成后如果渲染主线程没有没有完成会直接把解析的结果CSSOM添加到主线程中 style和link标签的解析和下载都是在预线程当中进行的，所以css下载不了的情况下也不会影响主线程的进度。最后css 标记化（token）也会形成一颗CSSOM树</p><p><img loading="lazy" src="/assets/images/http5-5a2e86ade7939f4e0d63cd4a382849fa.webp" width="720" height="480" class="img_ev3q">    </p><p>CSSOM</p><p><img loading="lazy" src="/assets/images/http6-3d71f23c53e6b6c51d23963e278a11bc.webp" width="720" height="493" class="img_ev3q">  </p><p>但是JS文件会阻塞HTML解析是为什么呢？</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- 因为主线程解析到script标签的时候，会停止解析HTML，并且会等待js文件下载好，然后解析完毕之后才继续进行解析，因为js代码是可以修改当前的DOM树的形成的，所以代码必须要等JS文件解析完毕之后才能继续生成DOM树</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="/assets/images/http7-17c1263274af89e643efec269ed0c2c0.webp" width="720" height="485" class="img_ev3q">  </p><p>通常script的标签都是在body标签的底部，这样就不会因为碰到较大的js文件下载而影响我们的首屏渲染 在最近几年的版本的浏览器中也提供了以下方式避免了js代码阻塞渲染的情况</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- async</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- defer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- prefetch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- preload</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>当HTML解析渲染完成后我们会得到DOM树和CSSOM树，这是浏览器渲染的第一步
<img loading="lazy" src="/assets/images/http8-fd0beaf5bef70720f5e3e4e21944c3c2.webp" width="720" height="910" class="img_ev3q"> </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-样式计算">2. 样式计算<a href="#2-样式计算" class="hash-link" aria-label="Direct link to 2. 样式计算" title="Direct link to 2. 样式计算">​</a></h4><p>接下来把解析出来的DOMTree和CSSOMTree结合到一起 主线程会遍历DOM树的每个节点最终计算出每个节点的样式，称之位Computed Style 在这个计算的过程中，我们的预设值会变成绝对值，比如我们的color：red会变成 color：rgb(255,0,0),相对单位会变成绝对单位，比如em会变成px</p><p><img loading="lazy" src="/assets/images/http9-3ee9b626e2556ea1a9c1e36600e3bdb0.webp" width="720" height="690" class="img_ev3q">   </p><p>浏览器确定每个节点的样式之后，会形成样式规则树，这颗树上记录了每一个DOM节点的样式 另外计算属性会对每一个节点进行所有样式的属性值赋值，如果某个节点开发时没有赋予样式，将使用样式的默认值或者继承植 经过样式计算后会把DOM树和CSSOM树结合成带有样式的DOM树如下图</p><p><img loading="lazy" src="/assets/images/http10-1ed06a3a14500f419f327f3eb9df1646.webp" width="720" height="666" class="img_ev3q">   </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-布局">3. 布局<a href="#3-布局" class="hash-link" aria-label="Direct link to 3. 布局" title="Direct link to 3. 布局">​</a></h4><p>当浏览器解析HTML和样式计算后已经知道每个DOM节点所附带的样式了，但是还不足以呈现在页面上，因为我们还缺少每个元素在页面上的位置布局！ 主线程这个时候会递归遍历完刚刚构建好的DOM树，由于DOM树上挂载了计算样式，就可以计算出布局树（layout tree），布局树上的每一个节点都挂载了它在页面上的位置也就是X，Y的坐标以及盒子模型的大小等几何信息</p><p><img loading="lazy" src="/assets/images/http11-09d55fd0646ca0509f5a81637379a66e.jpg" width="813" height="1033" class="img_ev3q">   </p><p>虽然生成了布局树，但是布局树的和之前的DOM树存在一些差异， 比如当有点节点挂载了display：none的样式时，就不会在布局树上展示 还有就是虽然伪类元素不会在DOM树上展示，但是如果伪类元素如果有几何信息它就会在布局树上展示 还有比较少有人知道的匿名行盒，匿名块盒等也会导致布局树和DOM树的结构差异化</p><p><img loading="lazy" src="/assets/images/http12-6a975a2ad7eb1a7048572f8d2a8110af.webp" width="720" height="446" class="img_ev3q">  </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-分层">4. 分层<a href="#4-分层" class="hash-link" aria-label="Direct link to 4. 分层" title="Direct link to 4. 分层">​</a></h4><p>当我们的布局树构建完成之后，接下来的一步就是分层！ 为什么要分层呢？</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- 分层的好处在于，改变某一层级的元素时，只会对该层级产生影响，从而提高效率</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>主线程会遍历整个布局树生成一个层次树（Layer Tree）确定元素需要放在那一层</p><p><img loading="lazy" src="data:image/webp;base64,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" width="636" height="476" class="img_ev3q">    </p><p>滚动条，堆叠上下文，transform，opacity等样式对少都会影响分层的结果，也可以通过z-index，will-change属性对其进行分层、</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- will-change 为web开发者提供了一种告知浏览器该元素会有哪些变化的方法，这样浏览器可以在元素属性真正发生变化之前提前做好对应的优化准备工作。 这种优化可以将一部分复杂的计算工作提前准备好，使页面的反应更为快速灵敏。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-生成绘制指令">5. 生成绘制指令<a href="#5-生成绘制指令" class="hash-link" aria-label="Direct link to 5. 生成绘制指令" title="Direct link to 5. 生成绘制指令">​</a></h4><p>分层结束之后就开始绘制指令的生成了 主线程会给每一层单独生成一个绘制的指令集，用于生成该层的图像生成</p><p><img loading="lazy" src="data:image/webp;base64,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" width="720" height="387" class="img_ev3q"> </p><p>当主线程进行到这一步的时候你要注意了虽然生成了绘制的指令，但是还没有执行只是生成了指令，而且这个时候渲染主线程基本上已经完结了，接下来的工作将交给合成线程去完成</p><p><img loading="lazy" src="/assets/images/http15-4e1debca1e6a82b80b668ed7890a7a56.webp" width="809" height="385" class="img_ev3q"> </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="6-分块">6. 分块<a href="#6-分块" class="hash-link" aria-label="Direct link to 6. 分块" title="Direct link to 6. 分块">​</a></h4><p>这个时候就是合成线程开始工作了 合成线程它首先会对每个图层进行一些分块，划分为更小的区域</p><p><img loading="lazy" src="data:image/webp;base64,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" width="574" height="480" class="img_ev3q"> </p><p>当完成分块之后，合成线程就不会和主线程一样单独进行了，而是会申请更多的线程同时去完成分块内的工作！</p><p><img loading="lazy" src="/assets/images/http17-4538d86c45fe6556f676e3bc2b69b8c9.webp" width="720" height="405" class="img_ev3q"> </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="7-光栅化">7. 光栅化<a href="#7-光栅化" class="hash-link" aria-label="Direct link to 7. 光栅化" title="Direct link to 7. 光栅化">​</a></h4><p>当我们的分块完成之后，接下来就光栅化的阶段了，更简单的说就是确认每一个像素点的rbg颜色信息 光栅化的操作不是由合成线程来做的，而是合成线程交给GPU进程，GPU进程会以极高的速度完成光栅化 GPU是专门干图形化处理的工作，他会开启多个线程进行绘制</p><p><img loading="lazy" src="/assets/images/http18-318c61d1eceef0f122f7782d95efe51a.webp" width="720" height="259" class="img_ev3q"> </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="8-绘制">8. 绘制<a href="#8-绘制" class="hash-link" aria-label="Direct link to 8. 绘制" title="Direct link to 8. 绘制">​</a></h4><p>最终我们才进行绘制，这是最后一步 所有的图形块被光栅化之后，合成线程就拿到了每个图层以及每个块的位置信息，从而生成了一个个的【指引】信息 指引会标识出每个图块应该渲染到屏幕的哪个位置，并且会考虑到旋转，缩放等变形效果 旋转，缩放等效果都发生在合成线程当中，和渲染主线程没有关系。所以为什么transform效率高就是这个原因</p><p><img loading="lazy" src="/assets/images/http19-e6af6c2626a732dbbc2c8309652c575a.webp" width="720" height="394" class="img_ev3q"> </p><font size="20" color="red">总结 :</font><p>浏览器拿到HTML文本到最终渲染的一个整体流程</p><p><img loading="lazy" src="/assets/images/http20-262979d6a4c9cc82a313cef40e9d94c1.webp" width="720" height="350" class="img_ev3q"> </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="问题重排和重绘">问题：重排和重绘<a href="#问题重排和重绘" class="hash-link" aria-label="Direct link to 问题：重排和重绘" title="Direct link to 问题：重排和重绘">​</a></h4><p>重排（回流）： </p><p><img loading="lazy" src="/assets/images/http21-4b4055d0d0f43fee072a305140ed53d1.webp" width="720" height="189" class="img_ev3q"> </p><p>重绘：</p><p><img loading="lazy" src="/assets/images/http22-c55b4783ccbb53731fd1e235f48c5711.webp" width="720" height="246" class="img_ev3q"> </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- 总结：这也是为什么重排的触发比重绘更加影响性能的渲染，因为重排会触发渲染主的流程的重新渲染，而重绘只需要重新执行合成线程</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></article></div><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#从输入url地址到看到页面中间经历了什么" class="table-of-contents__link toc-highlight">从输入URL地址到看到页面，中间经历了什么？</a><ul><li><a href="#1-url解析" class="table-of-contents__link toc-highlight">1. URL解析</a></li><li><a href="#2-缓存检查" class="table-of-contents__link toc-highlight">2. 缓存检查</a></li><li><a href="#3-dns解析域名解析" class="table-of-contents__link toc-highlight">3. DNS解析（域名解析）</a></li><li><a href="#4-tcp三次握手" class="table-of-contents__link toc-highlight">4. TCP三次握手</a></li><li><a href="#5-数据传输" class="table-of-contents__link toc-highlight">5. 数据传输</a></li><li><a href="#6tcp的四次挥手" class="table-of-contents__link toc-highlight">6.TCP的四次挥手</a></li><li><a href="#7-页面渲染" class="table-of-contents__link toc-highlight">7. 页面渲染</a></li></ul></li></ul></div></div></div></main></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 zhangguoxinbuhuiCV.githup.io, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b9c77f65.js"></script>
<script src="/assets/js/main.d006512a.js"></script>
</body>
</html>